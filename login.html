<!DOCTYPE html>
<html>
<head>
	<title>Login</title>
</head>
<style type="text/css">
	.mid{
		margin-left:40vw;
		margin-top:30vh;
	}
</style>
<body>
	<div class="mid" >
	
  <h1>Login</h1>
<p id ="error" style="color: red;"></p>
	<p>Enter Email or Number</p></body><br/>
	<input type="text" id="i01">
	<br/>
	<p>Enter password</p>
	<br/>
	<input type="password" id="i02">
	
<p id="gt12"></p>

<p id="gt13"></p>
<br>
<button  onclick="verify()" style="margin-left: 35px;">Login</button>
<p>if you have new user click <a href="http://localhost:3000/"> Sign Up</a></p>
</div>
<script>
	const xml=new XMLHttpRequest();
	const xhttp = new XMLHttpRequest();
var verify=()=>{
xml.open('POST','http://localhost:3000/login');
xml.setRequestHeader("Content-Type", "application/json");
xml.send(
	JSON.stringify(
 		{  'email':document.getElementById('i01').value,
            'password':document.getElementById('i02').value
 }
 )
 	);
}
	
 xml.onload=()=>{

  		 var q=JSON.parse(xml.response);
  		 if(q.msg ==='gotologin'){
  		 	// window.alert('you have to signup first');
  		document.getElementById("error").innerHTML="No User with this email Exists ";
  		 	// window.location.assign("http://localhost:3000/");	
  	

  		 }
  		if (q.msg === 'gotohome'){
  			console.log(q.msg+'ahahaua');

  		 console.log(q.id +'ahahaua');
  			

	
  		 	xhttp .open('POST', 'http://localhost:3000/savehome');
  		 	xhttp .setRequestHeader("Content-Type", "application/json");
  		 	xhttp .send(JSON.stringify({id  : q.id}));
  		 	 window.location.assign("http://localhost:3000/home");
  		 	
  	
  		 }
  		// alert(q.msg);
  		// console.log(xml.response);
 }
// return q.msg;
// 	 // if(q.msg == 'login first'){
// 			// const xml=new XMLHttpRequest();

// }
// console.log(d());
// if(d=='login first'){
// 	console.log(d);
// 		xml.open('GET','http://localhost:3000/');
//  xml.setRequestHeader("Content-Type", "application/json");
//  xml.send();

// }

	// }
	</script>

</body>
</html>